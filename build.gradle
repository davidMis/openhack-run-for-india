// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.7.+'
    }
}

allprojects {
    repositories {
        mavenCentral()
    }
}

task (configureDex) {
    gradle.taskGraph.beforeTask { Task task ->
        if (task.name.contains("dex") && !task.name.contains("predex")) {
            task.libraries = findPredexTask().outputFolder
        }
    }
}

def findPredexTask(){
    gradle.taskGraph.getAllTasks().findAll{ task ->
        task.name.toLowerCase().contains('predex')
    }
}
